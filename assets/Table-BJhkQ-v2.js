import{l as re,r as y,c as u,o as ce,k as ie,m as B,b as s,d as i,e as O,y as b,p as k,x as I,N as ue,J as W,t as f,F as x,C as L,L as E,s as $,z as q,q as de}from"./vue.esm-bundler-DD7xIM0D.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";const be={key:0,class:"table__top"},me={class:"table__inner"},pe={key:0,class:"visually-hidden"},_e={class:"table__head"},he={class:"table__row"},ke={class:"table__flex"},fe={class:"table__body"},ge=["data-before-content"],ye={key:1,class:"table__value"},we={key:1,class:"table__bottom"},A=re({__name:"Table",props:{alternateBackground:{type:Boolean},content:{},description:{},headers:{},mobileScroll:{type:Boolean,default:!0},id:{},rowsQty:{},title:{}},emits:["checkRow"],setup(U,{emit:J}){const d=U,K=J,D=y([]),m=y(0),S=y(0),w=y(0),p=y(2),Q=y(!1),G=(e,t,a)=>{K("checkRow",{row:e,col:t,data:a})},v=u(()=>{const e=d.headers.map(t=>{let a="";const o={...t},c=(o.checkbox&&o.checkbox.length>0)??!1,n=o.checkbox&&o.checkbox==="checked",l=o.checkbox&&o.checkbox==="indeterminate",r="arrow-sort";return a=o.align?`table__cell--${o.align}`:"table__cell--start",delete o.checkbox,delete o.align,{...o,sortIcon:r,hasCheckbox:c,checked:n,indeterminate:l,alignClass:a}});return m.value>0&&(e[S.value].sortIcon=m.value%2===0?"arrow-large-down":"arrow-large-up"),e}),g=u(()=>d.content.map((t,a)=>Object.keys(t).map((c,n)=>{var T,H,M;const l=t==null?void 0:t._options.filter(se=>se.col===n),r=c,h={id:`${r}-${a}`,text:t[c],type:typeof((T=l[0])==null?void 0:T.checked)=="boolean"?"checkbox":"default",checked:(H=l[0])!=null&&H.checked?(M=l[0])==null?void 0:M.checked:!1};return{cellName:r,values:h,options:l}}).filter(c=>c.cellName!=="_options"))),X=u(()=>{let e="default";return m.value>0&&(e=m.value%2===0?"desc":"asc"),e}),Y=u(()=>{let e,t,a;return d.description&&(t="aria-describedby",a=d.description.id,e={[t]:a}),e??{}}),N=()=>{var a,o;const e=(a=D[`tableWrapper-${d.id}`])==null?void 0:a.offsetWidth,t=(o=D[`tableItem-${d.id}`])==null?void 0:o.offsetWidth;Q.value=e<t&&d.mobileScroll},Z=e=>{w.value=e-1},R=u(()=>C.value*w.value),C=u(()=>d.rowsQty&&d.rowsQty>0?d.rowsQty:g.value.length),V=u(()=>{const e=C.value*w.value+C.value;return e>_.value?_.value:e}),_=u(()=>g.value.length),ee=u(()=>C.value<_.value),j=u(()=>{const e=R.value,t=V.value;return g.value.sort(te.value).filter((a,o)=>o>=e&&o<t)}),te=u(()=>{const e=X.value,t=S.value;if(e!=="default")return function(a,o){const c=a[t].values.text.toString(),n=o[t].values.text.toString();return e==="desc"?n.localeCompare(c,void 0,{numeric:!0}):c.localeCompare(n,void 0,{numeric:!0})}}),ae=u(()=>v.value.map((t,a)=>{let o,c="none",n;return m.value>0&&S.value===a&&(c=m.value%2===0?"descending":"ascending"),t.sortable&&(o="aria-sort",n={[o]:c}),n})??{}),oe=(e,t,a)=>{g.value[a][t].options[0].checked=!e,p.value=t,P(),G(a,t,g.value[a][t].values)},z=y(0),F=()=>{z.value+=1},P=()=>{const e=g.value.filter(t=>t[p.value].options[0].checked).length;v.value[p.value].checked=e===_.value,v.value[p.value].indeterminate=e!==_.value&&e!==0,F()},ne=(e,t)=>{v.value[t].checked=!e,v.value[t].indeterminate=!1,p.value=t,g.value.map(a=>(a[p.value].options[0].checked=v.value[t].checked,a)),F()},le=e=>{m.value=S.value===e?m.value+1:1,S.value=e,w.value=0,P()};return ce(()=>{N(),window.addEventListener("resize",N)}),v.value.map((e,t)=>(e.hasCheckbox&&(p.value=t,P()),e)),ie(()=>{window.removeEventListener("resize",N)}),(e,t)=>{const a=B("SolarisCheckbox"),o=B("SolarisIcon"),c=B("SolarisPagination");return s(),i("div",{class:"table__container",key:z.value},[e.$slots.tableTop?(s(),i("div",be,[O(e.$slots,"tableTop",{},void 0,!0)])):b("",!0),k("div",{ref:`tableWrapper-${e.id}`,class:q(["table__wrapper",{"table__wrapper--shadow":Q.value&&e.mobileScroll}])},[k("div",me,[e.description?(s(),I(ue(e.description.tag?e.description.tag:"p"),{key:0,class:"visually-hidden",id:e.description.id,innerHTML:e.description.content},null,8,["id","innerHTML"])):b("",!0),k("table",W(Y.value,{ref:`tableItem-${e.id}`,class:["table",{"table--no-scroll":!e.mobileScroll}]}),[e.title?(s(),i("caption",pe,f(e.title),1)):b("",!0),k("thead",_e,[k("tr",he,[(s(!0),i(x,null,L(v.value,(n,l)=>(s(),i("th",W({tabindex:"0",scope:"col"},ae.value[l],{class:["table__cell table__cell--th",[n.alignClass,{"table__cell--sortable":n.sortable}]]}),[k("div",ke,[n.hasCheckbox?(s(),I(a,{key:0,id:`checkbox--${l}`,name:`checkbox--${l}`,value:n.checked,indeterminate:n.indeterminate,onInput:r=>ne(n.checked,l)},{default:E(()=>[$(f(n.text),1)]),_:2},1032,["id","name","value","indeterminate","onInput"])):b("",!0),n.hasCheckbox?b("",!0):(s(),i(x,{key:1},[$(f(n.text),1)],64)),n.sortable?(s(),I(o,{key:2,class:"table__sort",name:n.sortIcon,type:"bold",onClick:r=>le(l)},null,8,["name","onClick"])):b("",!0)])],16))),256))])]),k("tbody",fe,[(s(!0),i(x,null,L(j.value,(n,l)=>(s(),i("tr",{key:l,class:q(["table__row table__row--body",{"table__row--alternate":e.alternateBackground,"table__row--selected":j.value[l][p.value].values.checked}])},[(s(!0),i(x,null,L(n,(r,h)=>(s(),i("td",{key:h,class:q(["table__cell",[v.value[h].alignClass]]),"data-before-content":v.value[h].text},[r.values.type==="checkbox"?(s(),I(a,{key:0,class:"table__check-body",id:`checkbox--${l}--${h}`,name:`checkbox--${l}--${h}`,value:r.options[0].checked,onInput:T=>oe(r.options[0].checked,h,l+C.value*w.value)},{default:E(()=>[$(f(r.values.text),1)]),_:2},1032,["id","name","value","onInput"])):b("",!0),O(e.$slots,r.cellName,{content:r,index:l},void 0,!0),r.values.type==="default"?(s(),i("span",ye,f(r.values.text),1)):b("",!0)],10,ge))),128))],2))),128))])],16)])],2),ee.value?(s(),i("div",we,[k("span",null,[$(f(R.value+1)+" - "+f(V.value)+" de "+f(_.value)+" élément",1),_.value>0?(s(),i(x,{key:0},[$("s")],64)):b("",!0)]),de(c,{class:"table__pagination",withLinks:!1,perPage:C.value,total:_.value,value:w.value+1,onInput:Z},null,8,["perPage","total","value"])])):b("",!0)])}}}),Ce=ve(A,[["__scopeId","data-v-3a2de3b4"]]);A.__docgenInfo={exportName:"default",displayName:"Table",description:"",tags:{},props:[{name:"alternateBackground",required:!1,type:{name:"boolean"}},{name:"content",required:!0,type:{name:"Array",elements:[{name:"intersection",elements:[{name:"{ [key: string]: string | number }"},{name:"{ _options: Option[] }"}]}]}},{name:"description",required:!1,type:{name:"Description"}},{name:"headers",required:!0,type:{name:"Array",elements:[{name:"Thead"}]}},{name:"mobileScroll",required:!0,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"id",required:!0,type:{name:"string"}},{name:"rowsQty",required:!1,type:{name:"number"}},{name:"title",required:!1,type:{name:"string"}}],events:[{name:"checkRow"}],slots:[{name:"tableTop"},{name:"cell.cellName",scoped:!0,bindings:[{name:"name",title:"binding"},{name:"content",title:"binding"},{name:"index",title:"binding"}]}],sourceFiles:["/Users/jchourdeaux/workspace/projects/vue-solaris/src/components/organisms/Table/Table.vue"]};const $e=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"}));export{Ce as S,$e as _};
