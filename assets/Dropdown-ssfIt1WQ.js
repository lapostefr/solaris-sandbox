import{l as Ie,E as ke,G as Be,r as _,P as xe,c as Ae,w as B,a as Ge,o as Ke,m as T,b as n,d,p as k,z as S,u as a,t as V,y as c,D as p,v as h,q as x,L as Re,H as le,Q as Ue,O as Se,x as A,K as $e,F as G,C as Ve,R as je,I as Je,J as Qe,T as We,n as Xe,j as Ye}from"./vue.esm-bundler-DD7xIM0D.js";import{o as Ze}from"./index-ADTFLffw.js";import{u as ea}from"./useDropdown-BVv9J1eL.js";import{_ as aa}from"./_plugin-vue_export-helper-DlAUqK2U.js";const la=["aria-describedby"],oa=["for"],sa=["tabindex","aria-disabled"],na={key:0,class:"dropdown__flag-container"},ta={class:"dropdown__value"},ra={key:1,class:"dropdown__container"},da={key:0,class:"dropdown__placeholder"},ia={key:1,class:"dropdown__value"},ua={key:2,class:"dropdown__value"},ca=["id"],pa=["aria-selected","disabled","id","data-order","name","value","onKeydown","onChange"],ma=["aria-selected","disabled","id","data-order","name","value","onUpdate:modelValue","onKeydown"],fa=["for"],va={key:0,class:"dropdown__color"},ga={class:"dropdown__text"},ya={key:1,class:"dropdown__no-result"},qe=Ie({__name:"Dropdown",props:ke({lazyload:{type:Boolean,default:!0},loadFlags:{type:Boolean},active:{default:"active"},activeGroup:{type:Boolean},dataError:{},id:{},label:{},labelPosition:{default:"inside"},listboxHeight:{default:0},message:{},name:{},options:{},phoneCode:{},picto:{default:"arrow-bottom"},placeholder:{},selectionType:{},size:{default:"default"},type:{default:"simple"},searchField:{type:Boolean},searchFieldMode:{default:"contains"}},{modelValue:{},modelModifiers:{}}),emits:ke(["simpleSelected","change","multiSelected"],["update:modelValue"]),setup(oe,{emit:Fe}){var he,we;const t=oe,se=Be(oe,"modelValue"),K=Fe,R=Ye(),m=_([]),ne=_(null),g=_(),te=_(),re=_(),U=_(!1),de=_({name:"",alt:""}),j=_(null),ie=_(""),{id:y,options:ue,phoneCode:ce,searchField:pe,searchFieldMode:Me}=xe(t),{clickTarget:E,toggleListBox:q,close:b,displayAllFlags:J,multiSelected:me,focusItem:H,optionSelected:De,dynamicListboxHeight:Ce,opened:F,dynamicHeight:fe,simpleValue:i,simpleLabel:D,searches:O,noSearchResult:Te,multiValue:Q,multiLabel:W,dynamicOptions:Ee,optionsList:z,dynamicOptionsList:X,focusedIndex:$,firstIndexOpt:Y,scrollSelectedValue:L,listForScroll:He,firstOptionChecked:ve}=ea(K,y,ue,ce,pe,Me,m,te,g,re);i.value=se.value,Ze(ne,e=>b());const ge=Ae(()=>z.value.find(e=>e.flag&&e.checked));B(i,()=>{b(),i.value!==void 0&&(se.value=i.value,K("simpleSelected",i.value))});const M=()=>t.selectionType?t.selectionType:t.type;B(ue,()=>{Z(ge.value)},{deep:!0});const ye=()=>{const e=z.value.find(l=>l.checked);if(e)return L.value=e.value,{label:e.label||e.value,value:e.value}},Oe=e=>{e.checked=!e.checked,z.value.forEach(l=>{l.id!==e.id&&(l.checked=!1)}),D.value=e.label||e.value,i.value=e.value,Z(e),K("change",e)},Z=e=>{e&&e.flag&&e.label?(U.value=!0,de.value={name:e.flag.name,alt:e.flag.alt}):U.value=!1},ze=()=>{const l=g.value.sort((u,C)=>u.dataset.order-C.dataset.order),f=X.value.findIndex(u=>u.checked&&!u.disabled),v=X.value.every(u=>u.disabled);f>=0?$.value=f:Y.value.disabled===0&&!v?$.value=Y.value.enabled:$.value=0,X.value.length>0&&l[$.value].focus()};B(O,async()=>{await be()}),B(F,async()=>{await be()});const be=async()=>{var f,v;t.selectionType!=="simple"&&Ce(),await Xe();const e=m.value[t.id],l=m.value[`${t.id}-optionsList`];ve.value=Q.value?(f=z.value.find(u=>u.checked&&!u.disabled))==null?void 0:f.value:void 0,t.searchField&&((v=R==null?void 0:R.proxy)==null?void 0:v.$refs).search.$refs.inputRef.focus(),F.value?(L.value=M()==="multi"?ve.value:i.value,l==null||l.scrollTo({top:Pe(),left:0})):(L.value=void 0,e.focus())},Le=e=>{var s,w;const l=m.value[`${t.id}-optionsList`],f=m.value[`${e.id}-label`],v=e.position,u=e.groupNum+1,C=((s=m.value[`${t.id}-group-${u}`])==null?void 0:s.clientHeight)||0,N=(f==null?void 0:f.clientHeight)||0,I=(((l==null?void 0:l.clientHeight)||0)-N)/2;return t.searchField||((w=g==null?void 0:g.value[v])==null||w.focus(),$.value=v),u*C+v*N-I},Pe=()=>{const e=De(He.value);if(L.value!==void 0&&e&&!e.disabled)return Le(e);t.searchField||($.value=Y.value.enabled,g==null||g.value[$.value].focus())},Ne=()=>{var e,l;return(e=t.dataError)!=null&&e.active&&((l=t.dataError)!=null&&l.message)?ie.value:void 0},_e=()=>{ie.value=j.value.idMessage?j.value.idMessage:"error-message"};M()==="simple"&&(i.value=(he=ye())==null?void 0:he.value,D.value=(we=ye())==null?void 0:we.label,Z(ge.value));const P=()=>t.options.length&&!!t.options[0].optionsList&&t.options[0].optionsList.length?t.active:"disabled";return Ge(()=>{_e()}),Ke(()=>{_e()}),(e,l)=>{var ee,I;const f=T("SolarisFlag"),v=T("SolarisIcon"),u=T("SolarisDropdownMessage"),C=T("SolarisInput"),N=T("SolarisPicture");return n(),d("div",{class:S(["dropdown__wrapper",{"dropdown__wrapper--open":a(F)}])},[k("fieldset",{class:S(["dropdown",[`dropdown--${e.labelPosition}`,{"dropdown--small":e.size=="small"||e.size=="compact","dropdown--medium":e.size=="medium"||e.size=="default"||e.size=="regular","dropdown--filled":a(W)&&a(W).length||a(D)&&a(D).length,"dropdown--placeholder":!!e.placeholder,"dropdown--isOpen":a(F)}]]),ref_key:"targetDropdown",ref:ne,onMouseover:l[13]||(l[13]=(...s)=>a(J)&&a(J)(...s)),"aria-describedby":Ne()},[e.label?(n(),d("legend",{key:0,class:S(["dropdown__label",`dropdown__label--${e.labelPosition}`]),ref:s=>m.value[a(y)]=s,for:a(y)},V(e.label),11,oa)):c("",!0),k("div",{ref:s=>m.value[a(y)]=s,class:S(["dropdown__element",[`dropdown__element--${e.labelPosition}`,{"dropdown__element--inside-label":!!e.label&&e.labelPosition==="inside","dropdown__element--inside-no-label":!e.label&&e.labelPosition==="inside","dropdown__element--disabled":P()==="disabled","dropdown__element--readonly":P()==="readonly","dropdown__element--error":(ee=e.dataError)==null?void 0:ee.active}]]),tabindex:P()==="active"?0:-1,"aria-disabled":P()==="disabled",onClick:l[0]||(l[0]=(...s)=>a(q)&&a(q)(...s)),onKeydown:[l[1]||(l[1]=p(h((...s)=>a(q)&&a(q)(...s),["prevent"]),["space","enter"])),l[2]||(l[2]=p((...s)=>a(q)&&a(q)(...s),["down","up"])),l[3]||(l[3]=p(h((...s)=>a(b)&&a(b)(...s),["shift","exact"]),["tab"]))]},[U.value?(n(),d("span",na,[x(f,{class:"dropdown__flag-top",country:de.value},null,8,["country"]),k("span",ta,V(a(ce)),1)])):(n(),d("span",ra,[e.placeholder&&!a(Q)&&!a(i)?(n(),d("span",da,V(e.placeholder),1)):c("",!0),M()==="multi"&&a(Q)?(n(),d("span",ia,V(a(W)),1)):c("",!0),M()==="simple"&&a(i)?(n(),d("span",ua,V(a(D)),1)):c("",!0)])),x(v,{name:e.picto,class:S(["dropdown__picto",{"dropdown__picto--isActive":e.picto==="arrow-bottom"&&a(F)}])},null,8,["name","class"])],42,sa),x(u,{ref_key:"childMessage",ref:j,message:e.message,error:(I=e.dataError)==null?void 0:I.message,dataError:e.dataError},null,8,["message","error","dataError"]),x(We,{name:"lightbox"},{default:Re(()=>[le(k("div",{ref:s=>m.value[`${a(y)}-lightbox`]=s,id:`${a(y)}-lightbox`,class:"dropdown__lightbox",role:"listbox","aria-multiselectable":"true",style:Se([e.listboxHeight&&e.listboxHeight>16?{"max-height":e.listboxHeight+"px"}:"",a(fe)?{height:a(fe)+"px"}:""]),onKeydown:[l[10]||(l[10]=p((...s)=>a(E)&&a(E)(...s),["enter","space"])),l[11]||(l[11]=p((...s)=>a(b)&&a(b)(...s),["esc"])),l[12]||(l[12]=p(h((...s)=>a(b)&&a(b)(...s),["exact","prevent"]),["tab"]))]},[a(pe)?(n(),A(C,{key:0,ref_key:"search",ref:te,class:"dropdown__search",modelValue:a(O),"onUpdate:modelValue":l[4]||(l[4]=s=>$e(O)?O.value=s:null),name:"nameSearch",id:"idSearch",type:"text",label:"Rechercher",icon:"search-loupe","is-quiet":"",autocomplete:"off",onGoDown:ze,onInput:a(J)},null,8,["modelValue","onInput"])):c("",!0),k("div",{ref:s=>m.value[`${a(y)}-optionsList`]=s,class:"dropdown__optionsList"},[(n(!0),d(G,null,Ve(a(Ee),(s,w)=>(n(),d(G,{key:`dropdown-${a(y)}-group-${w}`},[e.activeGroup&&s.groupName?(n(),d("span",{key:0,ref_for:!0,ref:o=>m.value[`${a(y)}-group-${w}`]=o,class:"dropdown__group"},V(s.groupName),513)):c("",!0),(n(!0),d(G,null,Ve(s.optionsList,(o,ae)=>(n(),d(G,{key:`dropdown-${a(y)}-group-${w}-option-${ae}-input`},[M()==="simple"?le((n(),d("input",{key:0,ref_for:!0,ref_key:"optionRef",ref:g,role:"option",tabindex:"-1","aria-selected":o.value===a(i),class:S(["dropdown__checker",[{"dropdown__checker--disabled":o.disabled}]]),type:"radio",disabled:o.disabled,id:o.id,"data-order":`${w}${ae}`,name:o.radioName,value:o.value,"onUpdate:modelValue":l[5]||(l[5]=r=>$e(i)?i.value=r:null),onKeydown:[l[6]||(l[6]=p(h((...r)=>a(b)&&a(b)(...r),["prevent"]),["enter","space"])),p(h(r=>a(H)("previous",o.id),["prevent"]),["up"]),p(h(r=>a(H)("next",o.id),["prevent"]),["down"]),l[7]||(l[7]=p(h(()=>{},["prevent"]),["left","right"]))],onChange:r=>Oe(o)},null,42,pa)),[[je,a(i)]]):c("",!0),M()==="multi"?le((n(),d("input",{key:1,ref_for:!0,ref_key:"optionRef",ref:g,role:"option",tabindex:"-1","aria-selected":o.checked,class:S(["dropdown__checker",[{"dropdown__checker--disabled":o.disabled}]]),disabled:o.disabled,type:"checkbox",id:o.id,"data-order":`${w}${ae}`,name:o.checkboxName,value:o.value,"onUpdate:modelValue":r=>o.checked=r,onKeydown:[l[8]||(l[8]=p((...r)=>a(E)&&a(E)(...r),["space"])),p(h(r=>a(H)("previous",o.id),["prevent"]),["up"]),p(h(r=>a(H)("next",o.id),["prevent"]),["down"])],onChange:l[9]||(l[9]=(...r)=>a(me)&&a(me)(...r))},null,42,ma)),[[Je,o.checked]]):c("",!0),k("label",{ref_for:!0,ref:r=>m.value[`${o.id}-label`]=r,for:o.id,class:S(["dropdown__item",[{"dropdown__item--disabled":o.disabled}]])},[o.color?(n(),d("i",va,[k("span",{class:"dropdown__subcolor",style:Se({background:o.color})},null,4)])):c("",!0),o.icon?(n(),A(v,{key:1,name:o.icon,class:"dropdown__icon"},null,8,["name"])):c("",!0),e.loadFlags&&o.flag?(n(),A(f,{key:2,ref_for:!0,ref_key:"flag",ref:re,class:"dropdown__flag",country:{name:o.flag.name,alt:""},lazyload:""},null,8,["country"])):c("",!0),o.image?(n(),A(N,Qe({key:3,class:"dropdown__image"},o.image),null,16)):c("",!0),k("span",ga,V(o.label||o.value),1)],10,fa)],64))),128))],64))),128))],512),a(Te)?(n(),d("span",ya,"Aucun r√©sultat")):c("",!0)],44,ca),[[Ue,a(F)]])]),_:1})],42,la)],2)}}}),ba=aa(qe,[["__scopeId","data-v-fef5754b"]]);qe.__docgenInfo={exportName:"default",displayName:"Dropdown",description:"",tags:{},props:[{name:"lazyload",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"loadFlags",required:!1,type:{name:"boolean"}},{name:"active",required:!1,type:{name:"union",elements:[{name:'"disabled"'},{name:'"readonly"'},{name:'"active"'}]},defaultValue:{func:!1,value:"'active'"}},{name:"activeGroup",required:!1,type:{name:"boolean"}},{name:"dataError",required:!1,type:{name:"DataError"}},{name:"id",required:!0,type:{name:"string"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"union",elements:[{name:'"inside"'},{name:'"outside"'}]},defaultValue:{func:!1,value:"'inside'"}},{name:"listboxHeight",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"message",required:!1,type:{name:"string"}},{name:"name",required:!0,type:{name:"string"}},{name:"options",required:!0,type:{name:"Array",elements:[{name:"Group"}]}},{name:"phoneCode",required:!1,type:{name:"string"}},{name:"picto",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'arrow-bottom'"}},{name:"placeholder",required:!1,type:{name:"string"}},{name:"selectionType",required:!1,type:{name:"union",elements:[{name:'"simple"'},{name:'"multiple"'}]}},{name:"size",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"compact"'},{name:'"regular"'}]},defaultValue:{func:!1,value:"'default'"}},{name:"type",required:!1,type:{name:"union",elements:[{name:'"simple"'},{name:'"multi"'}]},defaultValue:{func:!1,value:"'simple'"}},{name:"searchField",required:!1,type:{name:"boolean"}},{name:"searchFieldMode",required:!1,type:{name:"union",elements:[{name:'"contains"'},{name:'"startswith"'}]},defaultValue:{func:!1,value:"'contains'"}},{name:"value",defaultValue:{func:!1,value:"null"}}],events:[{name:"simpleSelected"},{name:"change"},{name:"multiSelected"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/vue-solaris/src/components/atoms/Dropdown/Default/Dropdown.vue"]};const Sa=Object.freeze(Object.defineProperty({__proto__:null,default:ba},Symbol.toStringTag,{value:"Module"}));export{ba as S,Sa as _};
