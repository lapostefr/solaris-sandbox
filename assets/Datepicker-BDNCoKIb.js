import{r as i,Y as Je,l as He,E as Re,G as Oe,P as ze,c as We,a as je,o as Ue,m as ve,b as ee,d as te,p,t as be,u as h,y as ge,z as ae,q as H,L as Ge,J as _e,H as Pe,A as Ke,B as Xe,j as Qe}from"./vue.esm-bundler-DD7xIM0D.js";import{i as Te}from"./isValidDate-CEoz4-cc.js";import{b as Ze,o as et}from"./index-ADTFLffw.js";import{g as tt}from"./generateId-DPOzJEtM.js";import{_ as at}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={xxs:320,xs:375,s:700,m:992,l:1280,xl:1440,xxl:1680,xxxl:3e3};function nt(D,oe,S,l,b,re,F,y){const I=i(-1e15),q=i(!1),R=Je({startDay:"",startMonth:"",startYear:I.value,endDay:"",endMonth:"",endYear:I.value,startDayInput:"",startMonthInput:"",startYearInput:"",endDayInput:"",endMonthInput:"",endYearInput:"",startNewTime:I.value,endNewTime:I.value}),T=i([{abbr:"Lun",name:"Lundi"},{abbr:"Mar",name:"Mardi"},{abbr:"Mer",name:"Mercredi"},{abbr:"Jeu",name:"Jeudi"},{abbr:"Ven",name:"Vendredi"},{abbr:"Sam",name:"Samedi"},{abbr:"Dim",name:"Dimanche"}]),le=i(["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"]),ie=i(864e5),O=i([{d:1,m:1},{d:1,m:5},{d:8,m:5},{d:14,m:7},{d:15,m:8},{d:1,m:11},{d:11,m:11},{d:25,m:12}]),de=i([17152488e5,17485128e5,17787528e5,18095976e5,18428616e5,17119656e5,17452296e5,17754696e5,18063144e5,18395784e5,17161992e5,17494632e5,17797032e5,1810548e6,1843812e6]),ue=(L,V,Y,d)=>{let k=F.value,n=S.value,g=b.value!==void 0?b.value:l.value,c=D.value,m=oe.value,f=y.value;d&&(k=d.weekend.value,n=d.disabledDaysByWeek.value,g=d.bankHolidays.value?d.bankHolidays.value:d.holidays.value,m=d.blackList.value,c=d.range.value,f=d.whiteList.value);let x=!1;const M=new Date(L,V,Y).getTime(),N=new Date(M).getDay(),z=!!(k&&[0,6].includes(N)),W=!!(n&&n.includes(N));if(g){const C=O.value.filter(J=>J.d===Y&&J.m-1===V),E=new Date(L,V,Y,12,0,0,0).getTime(),P=de.value.includes(E);x=C.length>0||P}const j=!!(m&&m.length>0&&m.includes(M)),B=!!(f&&f.length>0&&!f.includes(M)),$=!!(c&&c.min&&M<c.min),pe=!!(c&&c.max&&M>c.max),U=32-new Date(L,V,32).getDate(),ce=Array.from({length:U},(C,E)=>E+1),G=Y>ce.length;return z||W||x||j||B||$||pe||G};return q.value=re.value==="interval",{nullTime:I,interval:q,inputData:R,weekdays:T,allMonths:le,oneDay:ie,holidaysList:O,isDisabled:ue}}const se=D=>(Ke("data-v-3209f442"),D=D(),Xe(),D),st=["aria-describedby"],ot={class:"lp-datepicker__date"},rt={class:"lp-datepicker__label"},lt={class:"lp-datepicker__inputs"},it=["aria-label","value","readonly","tabindex","disabled"],dt=se(()=>p("span",{class:"lp-datepicker__slash"},"/",-1)),ut=["aria-label","value","readonly","tabindex","disabled"],pt=se(()=>p("span",{class:"lp-datepicker__slash"},"/",-1)),ct=["aria-label","value","readonly","tabindex","disabled"],yt={key:0,class:"lp-datepicker__date"},mt={class:"lp-datepicker__label"},ft={class:"lp-datepicker__inputs"},vt=["aria-label","value","readonly","tabindex","disabled"],bt=se(()=>p("span",{class:"lp-datepicker__slash"},"/",-1)),gt=["aria-label","value","readonly","tabindex","disabled"],_t=se(()=>p("span",{class:"lp-datepicker__slash"},"/",-1)),ht=["aria-label","value","readonly","tabindex","disabled"],kt=["aria-expanded","disabled"],Dt=["aria-expanded","disabled"],It={key:1,class:"lp-datepicker__dropdown"},Mt={class:"lp-datepicker__error-message-text"},Ve=He({__name:"Datepicker",props:Re({dataError:{},disabled:{type:Boolean},end:{},size:{default:"large"},start:{},blackList:{},buttonLayout:{},range:{},disabledDaysByWeek:{},holidays:{type:Boolean},bankHolidays:{type:Boolean},typage:{default:"default"},inputReadonly:{type:Boolean},weekend:{type:Boolean},whiteList:{},withReset:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:Re(["input","blur","change","selection","reset"],["update:modelValue"]),setup(D,{emit:oe}){var Ae;const S=Oe(D,"modelValue"),l=D,b=oe,re=tt,F=Qe(),y=(Ae=F==null?void 0:F.proxy)==null?void 0:Ae.$el,I=i(),q=i(),R=i(),T=i(),{range:le,blackList:ie,disabledDaysByWeek:O,holidays:de,bankHolidays:ue,typage:L,weekend:V,whiteList:Y}=ze(l),{nullTime:d,interval:k,inputData:n}=nt(le,ie,O,de,ue,L,V,Y),g=i(d.value),c=i(d.value),m=i(!1),f=i(!1),x=i({left:"0px",right:"inherit",transform:"translateX(0)",isSmall:!1}),M=i({maxHeight:"auto"}),N=i("lp-datepicker__opened--bottom"),z=i(!1),W=i(""),j=i(null),B=i(!1),$=e=>{B.value=!1;const t=e.target,a=t.value,s=t.dataset.datepickerName||"",r=t.selectionStart,o=a.replace(/\D/g,"");if(t.value=o,r!==null){const u=a.length-o.length;t.setSelectionRange(r-u,r-u)}Ie(o,s,"start"),k.value&&Ie(o,s,"end"),(/^\d*$/.test(a)||!o)&&b("input",e)},pe=We(()=>({colorBorderTop:"supernova",mobileFull:!1,size:"default",showTitle:!1,title:l.typage==="default"?"Choisir la date":"Choisir les dates"})),U=e=>{const t=e.height,a=y==null?void 0:y.getBoundingClientRect(),s=a==null?void 0:a.top,r=window.innerHeight-(a==null?void 0:a.bottom);let o="bottom";r<t+16&&s>t+16&&(o="top"),N.value=`lp-datepicker__opened--${o}`},ce=()=>{var e,t;return(e=l.dataError)!=null&&e.active&&((t=l.dataError)!=null&&t.message)?W.value:void 0},G=()=>{const e=j.value;W.value=e&&e.id?e.id:"error-message"},C=Ze({tablet_landscape:ne.m,tablet:ne.s}),E=e=>{const t=C.isGreaterOrEqual("tablet_landscape"),a=C.isGreaterOrEqual("tablet"),s=t,r=k.value&&s?758:ne.xs,o=r===ne.xs,u=(y==null?void 0:y.getBoundingClientRect().left)+r>window.innerWidth,w=u?"inherit":"0px",A=u?"0px":"inherit";x.value={left:a?w:"50%",transform:a?"":"translateX(-50%)",right:A,isSmall:o},e==="modale"?(f.value=!f.value,m.value=!1):(m.value=!m.value,f.value=!1),B.value&&P()},P=()=>{g.value=d.value,c.value=d.value},J=()=>{B.value=!0,Object.keys(n).forEach(s=>{s.endsWith("Input")&&(n[s]="")});const e=g.value!==d.value,t=c.value!==d.value,a=[...e?[g.value]:[],...t?[c.value]:[]];b("reset",a),e&&t&&(c.value=d.value)},he=e=>{var s,r;let t="dropdown";e.from==="fromDropdown"&&(m.value=!m.value),e.from==="fromModal"&&(t="modal",f.value=!f.value),(s=T.value)==null||s.focus(),(r=R.value)==null||r.focus();const a=y==null?void 0:y.querySelector(".lp-datepicker__toggle--"+t);a==null||a.focus()},ye=()=>{m.value&&(m.value=!1);const e=y==null?void 0:y.querySelector(".lp-datepicker__toggle--dropdown");e==null||e.focus()},ke=()=>{f.value&&(f.value=!1);const e=y==null?void 0:y.querySelector(".lp-datepicker__toggle--modal");e==null||e.focus()},De=e=>{const t={day:`${e}DayInput`,month:`${e}MonthInput`,year:`${e}YearInput`},a=n[t.day];if(a){const o=parseInt(a);n[t.day]=o===0?"01":o.toString().padStart(2,"0")}const s=n[t.month];["0","1"].includes(s)&&(n[t.month]="01");const r=n[t.year];if(r){const o=parseInt(r);o<100?n[t.year]=(o+2e3).toString():n[t.year]=o.toString().padStart(4,"0")}},_=(e,t)=>{if(z.value=!!e,m.value=!1,e===!1&&t==="start"){if(De(t),!n.startDayInput||!n.startMonthInput||!n.startYearInput)return;const a=`${n.startDayInput}/${n.startMonthInput}/${n.startYearInput}`;b("input",a),b("blur"),S.value[0]=`${a}`}if(e===!1&&t==="end"){if(De(t),!n.endDayInput||!n.endMonthInput||!n.endYearInput)return;const a=`${n.endDayInput}/${n.endMonthInput}/${n.endYearInput}`;b("input",a),b("blur"),S.value[1]=`${a}`}},Ie=(e,t,a)=>{if(t===`${a}-day`){const s=Ne(e,n[`${a}MonthInput`],n[`${a}YearInput`]);n[`${a}DayInput`]=s,n[`${a}Day`]=s,n[`${a}DayInput`]==="0"&&(n[`${a}Day`]="01")}if(t===`${a}-month`){const s=Ee(e,a,n[`${a}DayInput`],n[`${a}YearInput`]);n[`${a}MonthInput`]=s,n[`${a}Month`]=s,n[`${a}MonthInput`]==="0"&&(n[`${a}Month`]="01")}if(t===`${a}-year`){const s=Fe(e,a,n[`${a}DayInput`],n[`${a}MonthInput`]);n[`${a}YearInput`]=e,n[`${a}Year`]=s}Ye(a)},Ye=e=>{n[`${e}NewTime`]=Be(n[`${e}Year`],n[`${e}Month`],n[`${e}Day`]);const t=Me("start"),a=Me("end");e==="start"?g.value=t?d.value:n.startNewTime:e==="end"&&(c.value=a?d.value:n.endNewTime)},Me=e=>n[`${e}DayInput`]===""||n[`${e}MonthInput`]===""||n[`${e}YearInput`]==="",$e=(e,t,a)=>t?`0${e}`:a?`0${e[0]}`:e.length===2&&e==="00"?"01":e,me=(e,t,a)=>{const s=parseInt(e),r=parseInt(t);let o=parseInt(a);o=o<100?o+2e3:o;const u=new Date(o,r,0).getDate();return{dayValue:s,monthValue:r,yearValue:o,daysInMonth:u}},Ne=(e,t,a)=>{const{dayValue:s,daysInMonth:r}=me(e,t,a),o=Math.floor(r/10)||3,u=e.length===1&&s>o,w=s>r||(!t||!a)&&s>31;return $e(e,u,w)},Ee=(e,t,a,s)=>{const{monthValue:r,dayValue:o,daysInMonth:u}=me(a,e,s),w=e.length===1&&r>1,A=r>12,Z=$e(e,w,A);return we(o,u,t),Z},Fe=(e,t,a,s)=>{const{dayValue:r,daysInMonth:o,yearValue:u}=me(a,s,e);return we(r,o,t),u},we=(e,t,a)=>{if(e>t){const r=a==="start"?"startDayInput":"endDayInput",o=a==="start"?"startDay":"endDay";n[r]=t.toString(),n[o]=t.toString()}},Se=e=>{var a,s,r,o;B.value&&(P(),B.value=!1);const t=new Date(e[0]);if(n.startDay=K(t.getDate()),n.startMonth=K(t.getMonth()+1),n.startYear=t.getFullYear(),Q("start"),g.value=e[0],k.value||(S.value=[X(e[0])],b("selection",e[0]),ye(),ke(),(a=T.value)==null||a.focus(),(s=R.value)==null||s.focus()),k.value&&e.length===1&&(S.value=[X(e[0])],b("selection",e[0])),k.value&&e.length===2){const u=new Date(e[1]);n.endDay=K(u.getDate()),n.endMonth=K(u.getMonth()+1),n.endYear=u.getFullYear(),Q("end"),c.value=e[1],S.value=[X(e[0]),X(e[1])],b("selection",e),ye(),ke(),(r=T.value)==null||r.focus(),(o=R.value)==null||o.focus()}},K=e=>e.toLocaleString("fr-FR",{minimumIntegerDigits:2}),fe=e=>e.split("/"),xe=e=>{const t=fe(e),a=t[0],s=t[1],r=parseInt(t[2]);return Be(r,s,a)},X=e=>{const t=new Date(e),a=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return`${a}/${s}/${r}`},Q=e=>{n[`${e}DayInput`]=n[`${e}Day`],n[`${e}MonthInput`]=n[`${e}Month`],n[`${e}YearInput`]=""+n[`${e}Year`]},Be=(e,t,a)=>new Date(e,parseInt(t)-1,parseInt(a),12,0,0).getTime(),qe=e=>{if(!e.date||!Te(e.date))return;const t=e.date,a=fe(t);n.startDay=a[0],n.startMonth=a[1],n.startYear=parseInt(a[2]),Q("start"),g.value=xe(t)},Le=e=>{if(!e||!e.date||!Te(e.date))return;const t=e.date,a=fe(t);n.endDay=a[0],n.endMonth=a[1],n.endYear=parseInt(a[2]),Q("end"),c.value=xe(t)},Ce=()=>{qe(l.start),k.value&&Le(l.end)};return et(I,()=>ye()),g.value=d.value,c.value=d.value,Ce(),je(()=>{G()}),Ue(()=>{G()}),(e,t)=>{var o,u,w,A,Z;const a=ve("SolarisIcon"),s=ve("SolarisDatepickerDays"),r=ve("SolarisModal");return ee(),te("div",{class:ae(["lp-datepicker__container",[{"lp-datepicker--error":(o=e.dataError)==null?void 0:o.active}]])},[p("div",{class:ae(["lp-datepicker__wrapper",[`lp-datepicker__wrapper--${e.size}`,{"lp-datepicker__wrapper--focused":z.value},{"lp-datepicker__wrapper--disabled":e.disabled},{"lp-datepicker__wrapper--interval":h(k)},{"lp-datepicker__wrapper--readonly":e.inputReadonly},{"lp-datepicker__wrapper--empty":h(n).startDayInput===""&&h(n).startMonthInput===""&&h(n).startYearInput===null},{"lp-datepicker--error":(u=e.dataError)==null?void 0:u.active}]]),ref_key:"datepicker",ref:I,"aria-describedby":ce()},[p("fieldset",ot,[p("legend",rt,be(e.start.label),1),p("div",lt,[p("input",{id:"datepicker-start",type:"text",class:"lp-datepicker__input lp-datepicker__input--day",maxlength:"2","aria-label":`${e.start.label}, Jour, Format attendu : JJ (exemple: 12)`,value:h(n).startDayInput,readonly:l.inputReadonly,tabindex:l.inputReadonly?-1:0,disabled:l.disabled,onInput:$,onFocus:t[0]||(t[0]=v=>_(!0,"start")),onBlur:t[1]||(t[1]=v=>_(!1,"start")),placeholder:"JJ","data-datepicker-name":"start-day"},null,40,it),dt,p("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--month",maxlength:"2","aria-label":`${e.start.label}, Mois, Format attendu : MM (exemple : 08)`,value:h(n).startMonthInput,readonly:l.inputReadonly,tabindex:l.inputReadonly?-1:0,disabled:l.disabled,onInput:$,onFocus:t[2]||(t[2]=v=>_(!0,"start")),onBlur:t[3]||(t[3]=v=>_(!1,"start")),placeholder:"MM","data-datepicker-name":"start-month"},null,40,ut),pt,p("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--year",maxlength:"4","aria-label":`${e.start.label}, Année, Format attendu : AAAA (exemple : 2018)`,value:h(n).startYearInput,readonly:l.inputReadonly,tabindex:l.inputReadonly?-1:0,disabled:l.disabled,onInput:$,onFocus:t[4]||(t[4]=v=>_(!0,"start")),onBlur:t[5]||(t[5]=v=>_(!1,"start")),placeholder:"AAAA","data-datepicker-name":"start-year"},null,40,ct)])]),h(k)?(ee(),te("fieldset",yt,[p("legend",mt,be(e.end.label),1),p("div",ft,[p("input",{id:"datepicker-end",type:"text",class:"lp-datepicker__input lp-datepicker__input--day",maxlength:"2","aria-label":`${e.end.label}, Jour, Format attendu : JJ (exemple: 12)`,value:h(n).endDayInput,readonly:l.inputReadonly,tabindex:l.inputReadonly?-1:0,disabled:l.disabled,onInput:$,onFocus:t[6]||(t[6]=v=>_(!0,"end")),onBlur:t[7]||(t[7]=v=>_(!1,"end")),placeholder:"JJ","data-datepicker-name":"end-day"},null,40,vt),bt,p("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--month",maxlength:"2","aria-label":`${e.end.label}, Mois, Format attendu : MM (exemple: 08)`,value:h(n).endMonthInput,readonly:l.inputReadonly,tabindex:l.inputReadonly?-1:0,disabled:l.disabled,onInput:$,onFocus:t[8]||(t[8]=v=>_(!0,"end")),onBlur:t[9]||(t[9]=v=>_(!1,"end")),placeholder:"MM","data-datepicker-name":"end-month"},null,40,gt),_t,p("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--year",maxlength:"4","aria-label":`${e.end.label}, Année, Format attendu : AAAA (exemple: 2018)`,value:h(n).endYearInput,readonly:l.inputReadonly,tabindex:l.inputReadonly?-1:0,disabled:l.disabled,onInput:$,onFocus:t[10]||(t[10]=v=>_(!0,"end")),onBlur:t[11]||(t[11]=v=>_(!1,"end")),placeholder:"AAAA","data-datepicker-name":"end-year"},null,40,ht)])])):ge("",!0),p("button",{ref_key:"datepickerButtonDropdown",ref:R,"aria-expanded":m.value,"aria-label":"Choisir la date dans un calendrier",class:ae([[`lp-datepicker__toggle--${e.size}`,{"lp-datepicker__toggle--readonly":e.inputReadonly}],"lp-datepicker__toggle lp-datepicker__toggle--dropdown"]),disabled:l.disabled,onClick:t[12]||(t[12]=v=>E("dropdown"))},[H(a,{name:"editing-calendar",type:"light"})],10,kt),p("button",{ref_key:"datepickerButtonModal",ref:T,"aria-expanded":f.value,"aria-label":"Choisir la date dans un calendrier",class:ae([[`lp-datepicker__toggle--${e.size}`,{"lp-datepicker__toggle--readonly":e.inputReadonly}],"lp-datepicker__toggle lp-datepicker__toggle--modal"]),disabled:l.disabled,onClick:t[13]||(t[13]=v=>E("modale"))},[H(a,{name:"editing-calendar",type:"light"})],10,Dt),H(r,_e({modelValue:f.value,"onUpdate:modelValue":t[14]||(t[14]=v=>f.value=v)},pe.value,{class:"lp-datepicker__modal"}),{content:Ge(()=>[H(s,_e({class:["lp-datepicker__opened",N.value],ref_key:"datepickerDropdown",ref:q,onOpened:U,onSelection:Se,onHide:he,onReset:J,isInModal:!0,isSmall:x.value.isSmall,style:[x.value,M.value],startNumber:g.value,endNumber:c.value},e.$props),null,16,["isSmall","class","style","startNumber","endNumber"])]),_:1},16,["modelValue"]),m.value?(ee(),te("div",It,[H(s,_e({class:["lp-datepicker__opened",N.value],ref_key:"datepickerDropdown",ref:q,onOpened:U,onSelection:Se,onHide:he,onReset:J,style:[x.value,M.value],startNumber:g.value,endNumber:c.value},e.$props),null,16,["class","style","startNumber","endNumber"])])):ge("",!0)],10,st),(w=e.dataError)!=null&&w.active&&((A=e.dataError)!=null&&A.message)?Pe((ee(),te("p",{key:0,class:"lp-datepicker__error-message",ref_key:"errorMessage",ref:j,"aria-live":"polite"},[p("span",Mt,be((Z=e.dataError)==null?void 0:Z.message),1)])),[[h(re),"lp-datepicker-error-message--"]]):ge("",!0)],2)}}}),$t=at(Ve,[["__scopeId","data-v-3209f442"]]);Ve.__docgenInfo={exportName:"default",displayName:"Datepicker",description:"",tags:{},props:[{name:"dataError",required:!1,type:{name:"DataErrorType"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"end",required:!1,type:{name:"DateType"}},{name:"size",required:!1,type:{name:"union",elements:[{name:'"small"'},{name:'"medium"'},{name:'"large"'}]},defaultValue:{func:!1,value:"'large'"}},{name:"start",required:!0,type:{name:"DateType"}},{name:"blackList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"buttonLayout",required:!1,type:{name:"union",elements:[{name:'"center"'},{name:'"align-right"'}]}},{name:"range",required:!1,type:{name:"Range"}},{name:"disabledDaysByWeek",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"holidays",required:!1,type:{name:"boolean"}},{name:"bankHolidays",required:!1,type:{name:"boolean"}},{name:"typage",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"interval"'}]},defaultValue:{func:!1,value:"'default'"}},{name:"inputReadonly",required:!1,type:{name:"boolean"}},{name:"weekend",required:!1,type:{name:"boolean"}},{name:"whiteList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"withReset",required:!1,type:{name:"boolean"}}],events:[{name:"input"},{name:"blur"},{name:"change"},{name:"selection"},{name:"reset"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/vue-solaris/src/components/molecules/Datepicker/Datepicker.vue"]};const Rt=Object.freeze(Object.defineProperty({__proto__:null,default:$t},Symbol.toStringTag,{value:"Module"}));export{$t as S,Rt as _,nt as u};
